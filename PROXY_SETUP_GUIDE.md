# 代理设置使用指南

## 功能概述

白板应用现已支持全局HTTP代理设置，可以为整个应用配置代理服务器，包括WebView组件和所有网络请求。

## 代理配置

### 1. 打开设置界面
- 使用快捷键 `Cmd + ,`
- 或通过菜单栏选择"设置..."

### 2. 网络设置区域
在设置界面中找到"网络设置"区域，包含以下配置选项：

#### 基础设置
- **启用代理**: 开关按钮，控制是否启用代理
- **代理类型**: 支持HTTP、HTTPS、SOCKS5三种协议
- **服务器地址**: 代理服务器的IP地址或域名
- **端口**: 代理服务器端口号（默认8080）

#### 认证设置（可选）
- **需要认证**: 开关按钮，控制是否需要用户名密码认证
- **用户名**: 代理服务器用户名
- **密码**: 代理服务器密码（输入时显示为星号）

#### 测试功能
- **测试连接**: 点击测试按钮验证代理连接是否正常

## 代理类型说明

### HTTP代理
- 适用于HTTP协议的网页浏览
- 端口通常为8080、3128等
- 不加密连接

### HTTPS代理
- 适用于HTTPS协议的安全网页浏览
- 支持SSL/TLS加密
- 端口通常为8080、3128等

### SOCKS5代理
- 通用代理协议，支持TCP和UDP
- 更好的隐私保护
- 端口通常为1080

## 配置示例

### 本地代理服务器
```
代理类型: HTTP
服务器地址: 127.0.0.1
端口: 8080
需要认证: 否
```

### 企业代理服务器
```
代理类型: HTTP
服务器地址: proxy.company.com
端口: 3128
需要认证: 是
用户名: your-username
密码: your-password
```

### SOCKS5代理
```
代理类型: SOCKS5
服务器地址: 192.168.1.100
端口: 1080
需要认证: 否
```

## 技术实现

### 架构组件
- **AppConfig**: 代理配置的存储和管理
- **ProxyManager**: 代理设置的应用和管理
- **WebView**: 集成代理配置的网页组件
- **URLSession**: 支持代理的网络请求

### 配置存储
代理设置保存在应用配置文件中：
```
~/Documents/WhiteboardApp/AppConfig.json
```

### 应用范围
- WebView组件的所有网页加载
- 应用内的URLSession网络请求
- 代理连接测试功能

## 注意事项

1. **配置保存**: 所有代理设置自动保存，重启应用后生效
2. **实时应用**: 代理设置变更后立即应用到后续网络请求
3. **安全性**: 密码以明文形式存储在配置文件中，请注意文件权限
4. **网络测试**: 使用httpbin.org进行代理连接测试
5. **错误处理**: 代理连接失败时会显示具体错误信息

## 故障排除

### 代理连接失败
1. 检查代理服务器地址和端口是否正确
2. 确认代理服务器是否运行正常
3. 验证用户名密码是否正确（如果需要认证）
4. 尝试不同的代理类型

### 网页加载异常
1. 关闭代理设置测试是否正常
2. 检查代理服务器是否支持HTTPS
3. 确认代理服务器没有阻止特定网站

### 配置丢失
1. 检查应用配置文件是否存在
2. 重新输入代理设置
3. 确认应用有写入配置文件的权限